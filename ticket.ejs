<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">

</head>

<body>

    <%- include('../Views/left') %>

        <div class="container-fluid mt-5" style="margin-top: 41.7px; background-color: white; border-radius: 5px;">
            <div class="row">
                <div class="col-lg-6 py-2">
                    <div class=" dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false"
                        style="font-size: 14px; padding-top: 5px;">
                        <b>All Ticket</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(07)
                    </div>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Action</a></li>
                        <li><a class="dropdown-item" href="#">Another action</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                    </ul>


                </div>

                <div class="col-lg-6 d-flex justify-content-end py-2">
                    <!-- modal start -->
                    

                    <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                        aria-expanded="false"
                        style="height: 29px;font-size: 14px;padding: 0px;width: 32%;overflow: hidden;">
                        <i class="fa-regular fa-clock px-2"></i>
                        Countdown mode
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Action</a></li>
                        <li><a class="dropdown-item" href="#">Another action</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                    </ul>

                    <button class="btn btn-outline-secondary mx-3"
                        style="height: 29px;font-size: 14px; padding: 0px;width: 5%;">
                        <i class="fa-sharp fa-solid fa-user"></i>
                    </button>

                </div>
            </div>
        </div>


        <div class="container-fluid " style="border-radius: 5px;">
            <div class="row" id="ticket_">

            </div>
        </div>


        <script>

            var string = "freeCodecamp";
            console.log(string.charAt(0))

        </script>

        <script>
            
            $.ajax({

                
                type: "GET",
                dataType: "JSON",
                url: `/ticketing`,
                success: function (data) {
                    for (i = 0; i < data.result.length; i++) {
                        $('#ticket_').append(`<div class="col-lg-3 mt-2" style="font-size: 14px; color: red">
<a href='/chat/${data.result[i].name}/${data.result[i].email}/${data.result[i].ticket_no}/${data.result[i].ip_address}'><div class="container-fluid mt-3"
    style="background-color: white;color: black;border-radius: 5px; height: 150px;box-shadow: rgba(60, 66, 87, 0.12) 0px 7px 14px 0px, rgba(0, 0, 0, 0.12) 0px 3px 6px 0px;">
    <div class="row">
        <div class="col-lg-7 text-start " style="padding-top: 10px;">
            <p style="font-weight:600;font-size:13px;">${data.result[i].email}</p>
        </div>
        <div class="col-lg-5 justify-content-end d-flex">
            <div class="col-lg-4 text-center py-2 mt-1" style="font-size: 12px;">
                <b style="border-radius: 50%;border:1px solid black; padding: 6px;">${name.charAt(0)}YM</b></div>
        </div>
        <div class="row">
            <div class="col-lg-12 d-flex justify-content-start  p"
                style="font-size: 13px;padding: 0px 0px 0px 10px;">
                #<font color="red">${data.result[i].ticket_no}</font>&nbsp;&nbsp;&nbsp;.&nbsp;<b>
                <div style="font-weight:500;" id="name">${data.result[i].name}</div>
                </b>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-6 mt-1" style="font-size: 12.7px;">
                <div class="d-flex justify-content-start py-2" >

                    <i class="fa-regular fa-clock pt-1" style="font-size: 11px;"></i>
                    <div id="date" style="padding-left: 10px;">${data.result[i].c_date}</div>
                </div>
                <div class="d-flex">

                    <i class="fa-solid fa-calendar-days pt-2" style="font-size: 11px;"></i>
                    <div id="time" style="padding-left: 10px;padding-top: 4px;">${data.result[i].c_time}</div>
                </div>
                
            </div>
            <div class="col-lg-6 mt-3" style="font-size: 12.7px;">
                <button class="btn btn-outline-danger rounded-1"
                    style="height: 23px;font-size: 13px;width:50px;padding: 0px 0px 0px 0px;margin: 20px 0px 0px 52px ;">
                    <div id="status"></div>
                    ${data.result[i].status}
                </button>
            </div>
        </div>


        <div class="row">
            <div class="col-lg-8 mt-3">

            </div>
        </div>
    </div>
</div>
</div></a>`);

                    }

                }
            });
        </script>

        <script>
            document.addEventListener("DOMContentLoaded", function (event) {

                const showNavbar = (toggleId, navId, bodyId, headerId) => {
                    const toggle = document.getElementById(toggleId),
                        nav = document.getElementById(navId),
                        bodypd = document.getElementById(bodyId),
                        headerpd = document.getElementById(headerId)

                    // Validate that all variables exist
                    if (toggle && nav && bodypd && headerpd) {
                        toggle.addEventListener('click', () => {
                            // show navbar
                            nav.classList.toggle('show')
                            // change icon
                            toggle.classList.toggle('bx-x')
                            // add padding to body
                            bodypd.classList.toggle('body-pd')
                            // add padding to header
                            headerpd.classList.toggle('body-pd')
                        })
                    }
                }

                showNavbar('header-toggle', 'nav-bar', 'body-pd', 'header')

                /*===== LINK ACTIVE =====*/
                const linkColor = document.querySelectorAll('.nav_link')

                function colorLink() {
                    if (linkColor) {
                        linkColor.forEach(l => l.classList.remove('active'))
                        this.classList.add('active')
                    }
                }
                linkColor.forEach(l => l.addEventListener('click', colorLink))

                // Your code to run since DOM is loaded and ready
            });
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
            crossorigin="anonymous"></script>



</body>

</html>